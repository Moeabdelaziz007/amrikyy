#!/bin/bash

echo "๐ ุจุฏุก ุชุดุบูู ูุธุงู A2A..."

# ุงูุชุญูู ูู ูุฌูุฏ Node.js
if ! command -v node &> /dev/null; then
    echo "โ Node.js ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช Node.js ุฃููุงู."
    exit 1
fi

# ุงูุชุญูู ูู ูุฌูุฏ npm
if ! command -v npm &> /dev/null; then
    echo "โ npm ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช npm ุฃููุงู."
    exit 1
fi

# ุงูุงูุชูุงู ุฅูู ูุฌูุฏ Gateway
cd gateway

# ุชุซุจูุช ุงูุชุจุนูุงุช ุฅุฐุง ูู ุชูู ูุซุจุชุฉ
if [ ! -d "node_modules" ]; then
    echo "๐ฆ ุชุซุจูุช ุงูุชุจุนูุงุช..."
    npm install
fi

# ุฅูุดุงุก ููู .env ุฅุฐุง ูู ููู ููุฌูุฏุงู
if [ ! -f ".env" ]; then
    echo "โ๏ธ ุฅูุดุงุก ููู ุงูุจูุฆุฉ..."
    cp env.example .env
    echo "โ ุชู ุฅูุดุงุก ููู .env - ูุฑุฌู ุชุนุฏูู ุงูููู ุญุณุจ ุงูุญุงุฌุฉ"
fi

# ุชุดุบูู ุงููุธุงู
echo "๐ ุชุดุบูู Gateway..."
npm run dev