# AuraOS Webhook Bot - دليل الاستخدام

## نظرة عامة
نظام أتمتة متقدم مع Telegram Bot يستخدم Webhook للاستجابة الفورية وواجهة مستخدم تفاعلية محسنة.

## الميزات الرئيسية

### 🔗 Webhook فوري
- استجابة فورية للتحديثات
- HTTPS endpoint آمن
- Secret Token للحماية
- معالجة متقدمة للأخطاء

### 🎨 واجهة مستخدم تفاعلية
- Inline Keyboards مع أزرار تفاعلية
- قوائم ديناميكية
- تنقل سهل بين القوائم
- تصميم متسق وجذاب

### 📋 إدارة المهام المتقدمة
- إنشاء المهام عبر أزرار
- تتبع الحالة والأولوية
- عرض تفصيلي للمهام
- تحديث تلقائي

### 🤖 تكامل Autopilot ذكي
- حالة النظام في الوقت الفعلي
- إدارة مهام Autopilot
- تعيين مهام جديدة
- إحصائيات مفصلة

## التثبيت والإعداد

### 1. المتطلبات
```bash
npm install dotenv node-telegram-bot-api express
```

### 2. إعداد متغيرات البيئة
إنشاء ملف `.env`:
```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
WEBHOOK_URL=https://yourdomain.com/webhook
WEBHOOK_SECRET_TOKEN=your_secret_token_here
PORT=3000
```

### 3. إعداد Webhook
```bash
node setup-webhook.js
```

### 4. تشغيل البوت
```bash
node start-webhook-bot.js
```

### 5. التشغيل السريع
```bash
./quick-start-webhook.sh
```

## الأوامر المتاحة

### الأوامر الأساسية
- `/start` - بدء المحادثة مع واجهة تفاعلية
- `/menu` - القائمة الرئيسية
- `/help` - المساعدة
- `/status` - حالة النظام

### أوامر المهام
- `/task` - إدارة المهام
- `/task list` - عرض المهام
- `/task create` - إنشاء مهمة

### أوامر Autopilot
- `/autopilot` - قائمة Autopilot
- `/autopilot status` - حالة النظام
- `/autopilot tasks` - مهام Autopilot
- `/autopilot assign` - تعيين مهمة

## واجهة المستخدم التفاعلية

### القائمة الرئيسية
```
[➕ إنشاء مهمة] [📋 عرض المهام]
[🤖 Autopilot] [📊 الإحصائيات]
[⚙️ الإعدادات] [❓ المساعدة]
```

### قائمة المهام
```
[🟢 منخفضة] [🟡 متوسطة]
[🟠 عالية] [🔴 حرجة]
[🔙 العودة]
```

### قائمة Autopilot
```
[📊 حالة النظام] [📋 مهام Autopilot]
[🎯 تعيين مهمة] [🧠 المعرفة]
[🔙 العودة]
```

## الملفات الرئيسية

### ملفات الخدمة
- `server/webhook-telegram.ts` - خدمة Webhook محسنة
- `start-webhook-bot.js` - تشغيل البوت
- `setup-webhook.js` - إعداد Webhook
- `test-webhook.js` - اختبار النظام

### ملفات الإعداد
- `webhook-config.json` - إعدادات Webhook
- `start-webhook.sh` - سكريبت تشغيل
- `quick-start-webhook.sh` - تشغيل سريع

### ملفات التوثيق
- `setup_notes.md` - دليل الإعداد
- `phase2-webhook-improvements.md` - تحسينات المرحلة 2
- `WEBHOOK_BOT_README.md` - هذا الملف

## الاختبار

### اختبار النظام
```bash
node test-webhook.js
```

### اختبار الاتصال
```bash
node test_automation_system.js
```

## استكشاف الأخطاء

### مشاكل شائعة

#### البوت لا يستجيب
- تحقق من `TELEGRAM_BOT_TOKEN` في ملف `.env`
- تأكد من أن البوت يعمل في الخلفية
- راجع logs للأخطاء

#### Webhook لا يعمل
- تأكد من أن الخادم يدعم HTTPS
- تحقق من صحة `WEBHOOK_URL`
- استخدم `node setup-webhook.js` لإعادة الإعداد

#### الأزرار لا تعمل
- تأكد من أن البوت يدعم Inline Keyboards
- تحقق من معالجة Callback Queries
- راجع logs للأخطاء

### الحصول على المساعدة
- استخدم `/help` في البوت
- راجع ملفات التوثيق
- تحقق من logs النظام

## التطوير

### إضافة ميزات جديدة
1. تعديل `server/webhook-telegram.ts`
2. إضافة معالجات جديدة
3. تحديث واجهة المستخدم
4. اختبار الميزات الجديدة

### تخصيص الواجهة
1. تعديل Inline Keyboards
2. إضافة أزرار جديدة
3. تحسين التصميم
4. إضافة رموز تعبيرية

## الأمان

### حماية Webhook
- استخدام Secret Token
- التحقق من HTTPS
- مراقبة الطلبات
- تسجيل الأحداث

### حماية البيانات
- تشفير البيانات الحساسة
- التحكم في الوصول
- مراقبة الاستخدام
- نسخ احتياطية منتظمة

## الأداء

### تحسين الاستجابة
- استخدام Webhook بدلاً من Polling
- تحسين معالجة الطلبات
- تخزين مؤقت للبيانات
- مراقبة الأداء

### مراقبة النظام
- إحصائيات مفصلة
- logs منظمة
- تنبيهات الأخطاء
- تقارير الأداء

## الدعم

### المساعدة الفنية
- راجع ملفات التوثيق
- تحقق من logs النظام
- استخدم أدوات الاختبار
- راجع الأخطاء الشائعة

### التحديثات
- مراقبة التحديثات
- اختبار التحديثات
- نسخ احتياطية قبل التحديث
- توثيق التغييرات

---

**الإصدار**: 2.0.0
**تاريخ الإنشاء**: 2024-12-19
**آخر تحديث**: 2024-12-19
**الحالة**: ✅ جاهز للاستخدام
